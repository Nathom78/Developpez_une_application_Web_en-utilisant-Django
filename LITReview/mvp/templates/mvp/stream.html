{% extends 'base.html' %}
{% load i18n %}
{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% block bootstrap5_extra_head %}<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">{% endblock %}
{% load mvp_extras %} {# a enlever après avoir intégrer annotate #}

{% block title %}{% translate 'Flux' %}{% endblock %}

{% block content %}
    <div class="container-lg">
        <div class=" px-4 py-2 my-3">
            <div class="d-flex justify-content-around">
                <a class="btn btn-primary" href="{% url 'create_ticket' %}">{% translate 'Asking a review' %}</a>
                <a class="btn btn-primary" href="{% url 'create_ticket_review' %}">{% translate 'Create a review' %}</a>
            </div>
            <div class="d-flex row">
                {% for instance in page_obj %}
                    {% if instance.content_type == 'TICKET' %}
                        {% include 'mvp/partials/ticket_snippet.html' with ticket=instance %}
                    {% endif %}
                    {% if instance.content_type == 'REVIEW' %}
                        {% include 'mvp/partials/review_snippet.html' with review=instance %}
                    {% endif %}
                {% endfor %}
            </div>
            <div class="d-flex justify-content-center">
               {% bootstrap_pagination page_obj %}
            </div>

    <!--        <form class="p-4 p-md-5 border rounded-3 bg-light mt-3" method="post" >-->
    <!--            {% csrf_token %}-->
    <!--        </form>-->
        </div>
    </div>



    <!--<div class="pagination">-->
    <!--    <span class="step-links">-->
    <!--        {% if page_obj.has_previous %}-->
    <!--            <a href="?page=1">&laquo; first</a>-->
    <!--            <a href="?page={{ page_obj.previous_page_number }}">previous</a>-->
    <!--        {% endif %}-->

    <!--        <span class="current">-->
    <!--            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.-->
    <!--        </span>-->

    <!--        {% if page_obj.has_next %}-->
    <!--            <a href="?page={{ page_obj.next_page_number }}">next</a>-->
    <!--            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>-->
    <!--        {% endif %}-->
    <!--    </span>-->
    <!--</div>-->

    {% if messages %}
        {% for message in messages %}
            {% bootstrap_alert message.message|default:"" alert_type=message|bootstrap_message_alert_type extra_classes=message.extra_tags %}
        {% endfor %}
    {% endif %}

{% endblock content %}
